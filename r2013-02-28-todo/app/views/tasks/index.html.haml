%h3 tasks

#map_canvas

%script
  display_map(40.7316, -73.9901, 13);

%ul.task_list
  - @tasks.each do |task|
    %li
      %script
        = "add_marker(#{task.latitude}, #{task.longitude}, '#{task.title}');"
    %li
      %span= task.priority.try(:color)
      %span= task.title
    / %li= task.description
    / %li= task.due_date
    / %li= task.is_complete
    / %li= task.priority.name
    / %li= task.address

.row
  .six.columns
    .new
      = button_tag 'New Task', :id => 'new_task', :class => 'button success';
    .taskform.hide
      = form_tag do
        = label_tag 'priority_id'
        = select_tag 'priority_id', options_from_collection_for_select(@auth.priorities.order(:value).reverse, "id", "name")
        = label_tag 'title'
        = text_field_tag 'title'
        = label_tag 'description'
        = text_area_tag 'description'
        = label_tag 'due_date', 'Due'
        = text_field_tag 'due_date'
        = label_tag 'is_complete', 'Complete?'
        = check_box_tag 'is_complete'
        = label_tag 'address'
        = text_area_tag 'address'
        = hidden_field_tag 'task_id'
        = submit_tag 'Save', :id => 'create_task', :class => 'button success';
        = submit_tag 'Edit', :id => 'update_task', :class => 'button info'
        = link_to('Cancel', '#', :id => 'cancel_task', :class => 'button alert');
  .six.columns






